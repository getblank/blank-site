<!DOCTYPE html>
<html class="no-js" lang="ru-RU" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport"> 
    <meta name="generator" content="Hugo 0.17-DEV" />

    
        <meta name="description" content="Облачная платформа для создания бэкенда с открытым исходным кодом">
    

    
        <meta name="keywords" content="BaaS, backend, cloud, iot, platform, бэкенд, облачный сервис, интернет вещей">
    

    <meta name="author" content="BLANK">


    <base href="https://getblank.net/">

    
    <title>Access control &middot; BLANK cloud platform</title>
    

    <link rel="canonical" href="https://getblank.net/doc/access/">
    <link rel="shortcut icon" href="/img/favicon.ico" />
    <link href="" rel="alternate" type="application/rss+xml" title="BLANK cloud platform" /> <link href='https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900' rel='stylesheet' type='text/css'>
<link href="css/app.css" media="all" rel="stylesheet"/>
<link href="/css/hl-github.css" rel="stylesheet">

    
</head>

<body lang="ru">



<div id="navbar"  class="no-expand blog"  >
    <div class="container">
        
        <ul class="nav collapse" id="nav">
            
            
            <li class="collapse">
                <a href="/doc/introduction/" class="nav-link index-link active">
                    Документация
                </a>
            </li>
            <li class="collapse">
                <a href="#contacts" class="nav-link index-link" data-active-until="contacts-end" data-active-after="contacts-start">
                    Контакты
                </a>
            </li>
            
        </ul>
        <div class="logo">
            <a href="index.html" class="nav-link">
                BLANK
            </a>
        </div>
    </div>
</div>

<div id="docs">
  <div class="docs-contents">
    
    
      
        <h3>Начало работы</h3>
        <ul>
          
            <li >
              <a href="/doc/introduction/">Вступление</a>
            </li>
          
            <li >
              <a href="/doc/quickstart/">Быстрый старт</a>
            </li>
          
        </ul>
        <hr/>
      
    
      
        <h3>Blank CLI</h3>
        <ul>
          
            <li >
              <a href="/doc/cli/">CLI reference</a>
            </li>
          
            <li >
              <a href="/doc/build/">Сборка конфигурации</a>
            </li>
          
        </ul>
        <hr/>
      
    
      
        <h3>Blank Schema</h3>
        <ul>
          
            <li >
              <a href="/doc/schema/">Описание</a>
            </li>
          
            <li >
              <a href="/doc/stores/">Stores</a>
            </li>
          
            <li >
              <a href="/doc/store_reference/">Store reference</a>
            </li>
          
            <li  class="active">
              <a href="/doc/access/">Access control</a>
            </li>
          
            <li >
              <a href="/doc/filters/">Filters</a>
            </li>
          
            <li >
              <a href="/doc/httphooks/">HTTP hooks</a>
            </li>
          
            <li >
              <a href="/doc/lifecycle_events/">Lifecycle events</a>
            </li>
          
            <li >
              <a href="/doc/props_reference/">Props reference</a>
            </li>
          
        </ul>
        <hr/>
      
    
      
        <h3>Serverside JS API</h3>
        <ul>
          
            <li >
              <a href="/doc/db/">$db</a>
            </li>
          
            <li >
              <a href="/doc/request/">$request</a>
            </li>
          
        </ul>
        <hr/>
      
    
      
        <h3>HTTP API</h3>
        <ul>
          
            <li >
              <a href="/doc/httpauth/">Auth</a>
            </li>
          
            <li >
              <a href="/doc/httprest/">REST</a>
            </li>
          
        </ul>
        <hr/>
      
    
      
        <h3>Интеграция</h3>
        <ul>
          
            <li >
              <a href="/doc/facebook/">Facebook</a>
            </li>
          
        </ul>
        <hr/>
      
    

  </div>
  <div class="doc-wrapper">
    <div class="doc">
      <h1>Access control</h1>
      <div class="content">
        

<p>Управление доступом в Blank построено на основе ролей с принением системы условий. Права
можно назначить на Store, на отдельные свойства (prop) и действия (action) в Store.</p>

<p>При установке прав доступа задается массив правил типа AccessRule:</p>

<pre><code class="language-javascript">[AccessRule {
    &quot;role&quot;: &quot;roleName&quot;,
    &quot;permissions&quot;: &quot;Permissions string&quot;,
    &quot;condition&quot;: MongoQuery {}
}]
</code></pre>

<h3 id="значение-по-умолчанию">Значение по-умолчанию</h3>

<p>Если права не указаны, по-умолчанию у всех будет полный доступ, как если бы было задано такое правило:</p>

<pre><code class="language-javascript">    &quot;access&quot;: [&quot;role&quot;: &quot;all&quot;, &quot;permissions&quot;: &quot;crud&quot;]
</code></pre>

<p>Если параметр задан, доступ получат только те роли, которые указаны в параметре, в соответствии с их разрешениями.</p>

<h3 id="permissions">Permissions</h3>

<p>Набор разрешений, зависит от объекта прав доступа:</p>

<ul>
<li>Store:  <strong>crud</strong></li>
<li>Prop:   <strong>ru</strong></li>
<li>Action: <strong>rx</strong></li>
</ul>

<p>Если требуется указать запрет на какое-либо действие, перед символом разрешения добавляется знак &ldquo;-&rdquo;:</p>

<pre><code class="language-javascript">    &quot;access&quot;: [&quot;role&quot;: &quot;manager&quot;, &quot;permissions&quot;: &quot;cr -d&quot;]
</code></pre>

<p>Запреты имеют приоритет над разрешениями.</p>

<h3 id="conditions">Conditions</h3>

<p>Используется только при установке прав доступа на Store. Требуется, если разрешения зависят от самого объекта или
свойств пользователя, отличных от роли.</p>

<p>Condition задаётся в виде MongoQuery с дополнительным оператором $expression, который будет обработан до передачи
запроса в БД, например:</p>

<pre><code class="language-javascript">&quot;condition&quot;: {
    &quot;_ownerId&quot;: {
        &quot;$expression&quot;: &quot;$user._id&quot;,
    },
},
</code></pre>

<p>Такой condition сделает разрешения валидными только для объектов, владельцем которых является пользователь.
Допустим, пользователь с <strong>_id:&ldquo;1&rdquo;</strong> делает запрос Find. Он получит доступ только к тем объектам, которые удовлетворяют
условию:</p>

<pre><code class="language-javascript">&quot;_ownerId&quot;: &quot;1&quot;,
</code></pre>

<p><strong>$expression</strong> - выражение на JavaScript, в котором доступна переменная $user.</p>

<h3 id="роль-root">Роль root</h3>

<p>Роль root зарезервирована и в неё входит только один пользователь – сам root.</p>

<p>В отличие от других ролей, если разрешения для root не указаны явно, у root будет полный доступ.</p>

      </div>
    </div>
  </div>
  <div class="clear"></div>
</div>

<footer id="contacts">
  <div id="contacts-start"></div>
  <div>
    <ul class="footer-nav">
      <li><a href="/offer.pdf">Публичная оферта</a></li>
      <li><a href="/privacy">Политика конфиденциальности</a></li>
      <li><a href="/payment">Порядок оплаты</a></li>
      <li><a href="/post">Блог</a></li>
    </ul>
    
    <hr>
    <p>2016 &copy; Blank</p>
    <p>Телефон: +7 (922) 070 4022</p>
    <p>E-mail: info@getblank.net</p>
    <p style="font-size: .8rem">Россия &middot; Тюмень</p>
    <p class="hugo">Site powered by <a href="http://gohugo.io">Hugo</a></p>
  </div>
  <div id="contacts-end"></div>
</footer>
<div id="lightbox" class="hidden">
  <div class="back"></div>
  <div class="close"></div>
  <div class="image">
    <img src="" alt="" />
  </div>
</div>
<script type="text/javascript" src="js/app.js"></script>
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>

</html>